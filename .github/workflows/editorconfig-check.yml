name: EditorConfig Check

on:
  push:
    branches: [main, develop]
    paths:
      - '.editorconfig'
      - '**/.editorconfig'
      - '**/*.{ps1,vbs,hta,psm1,xml,json,md,txt,csv,log,sh,html,yml,yaml,ini,config,nuspec,csproj}'

  pull_request:
    branches: [main, develop]
    paths:
      - '.editorconfig'
      - '**/.editorconfig'
      - '**/*.{ps1,vbs,hta,psm1,xml,json,md,txt,csv,log,sh,html,yml,yaml,ini,config,nuspec,csproj}'

  workflow_dispatch:

jobs:
  editorconfig-check:
    name: üîç EditorConfig Lint
    runs-on: ubuntu-latest

    steps:
      - name: üì¶ Checkout Repository
        uses: actions/checkout@v4.1.1

      - name: üì• Download EditorConfig Checker
        run: |
          wget -q https://github.com/editorconfig-checker/editorconfig-checker/releases/latest/download/ec-linux-amd64.tar.gz
          mkdir ec-checker
          tar -xzf ec-linux-amd64.tar.gz -C ec-checker
          mv ec-checker/ec-linux-amd64 ec
          chmod +x ec
          sudo mv ec /usr/local/bin/ec

      - name: ‚ñ∂Ô∏è Run EditorConfig Checker
        run: |
          ec --version
          ec --disable-logs || true  # Avoid failing on stylistic warnings
